
<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:replace="fragments/header :: html_head">
</head>
<body>
	<header th:include="fragments/header :: menu"></header>

	<div class="container">
		<h2>Send Email</h2>
		<p> Compose an email to send to all Admin and Super-Admin users.</p>
		
		<form id="sendEmail">				
		
		<div class="border border-secondary px-3 py-3 d-grid gap-2">
			<div class="row">
				<div class="col">
					<label>Subject</label> <input type="text"
						class="form-control my-2" required id="subject"
						th:name="subject" th:value="${subject}" placeholder="Subject">
				</div>
				
			</div>
			
			<div class="row">
				<div class="col">
					<label>Message</label> <textarea
						class="form-control my-2" required id="message"
						th:name="message" th:value="${message}" placeholder="Message"
						rows="12"></textarea>
				</div>
				
			</div>
		
			
			<div class="row">
				<div class="col d-flex justify-content-end mx-3">
					<button type="submit" class="btn btn-primary mx-3 btnExport">
							<i class="fa-solid fa-file-export"></i> Send
						</button>
				    <button type="reset" class="btn btn-primary btnReset">
						<i class="fa-solid fa-rotate"></i> Reset
					</button>
				</div>					
			</div>
			
		</div>
		</form>
		
		<div class="my-5">
		<h2>Email Logs</h2>
		<table class="display my-2" id="emailLogTable">
			<thead>
				<tr>
					<th>Sender</th>
					<th>Subject</th>
					<th>Message</th>
				</tr>
			</thead>
			<tbody>
        	<tr th:each="log : ${emailLogs}">
        		<td th:text="${log.getSender()}"></td>
        		<td th:text="${log.getSubject()}"></td>
        		<td th:text="${log.getMessage()}"></td>
        	</tr>
        	</tbody> 
		</table>
		</div>
	</div>
	
	<th:block th:replace="fragments/modal :: toast"></th:block>
	
	<footer class="footer" th:include="fragments/footer :: footer"></footer>
	
</body>
<script src="../js/email.js"></script>
</html>
